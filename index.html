<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerador de Nota Fiscal</title>
 <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>BDS Nota Fiscal</h1>
    <form id="notaForm">
      <label>
        Tipo:
        <select id="tipo" required>
          <option value="Pedido">Pedido</option>
          <option value="Orçamento">Orçamento</option>
        </select>
      </label>

      <label for="data">Data:</label>
      <input type="date" id="data" required>

      <label for="nome">Nome:</label>
      <input type="text" id="nome" required>

      <label for="endereco">Endereço:</label>
      <input type="text" id="endereco" required>

      <label for="cidade">Cidade:</label>
      <input type="text" id="cidade" required>

      <label for="cpf">CPF/CNPJ:</label>
      <input type="text" id="cpf" required>

      <label for="descricao">Descrição do Produto/Serviço:</label>
      <textarea id="descricao" rows="4" required></textarea>

      <label for="valorUnit">Valor Unitário:</label>
      <input type="number" id="valorUnit" required step="0.01" min="0">

      <label for="quantidade">Quantidade:</label>
      <input type="number" id="quantidade" required min="1">

      <label for="entrada">Entrada (se houver):</label>
      <input type="number" id="entrada" step="0.01" min="0">

      <div class="button-container">
        <button type="button" onclick="gerarPDF()">Gerar PDF</button>
      </div>
    </form>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <script>
    let pdfData = null; // Variável para armazenar o PDF gerado

    async function gerarPDF() {
      const { jsPDF } = window.jspdf;

      // Coleta os dados do formulário
      const tipo = document.getElementById("tipo").value;
      const data = document.getElementById("data").value;
      const nome = document.getElementById("nome").value;
      const endereco = document.getElementById("endereco").value;
      const cidade = document.getElementById("cidade").value;
      const cpf = document.getElementById("cpf").value;
      const descricao = document.getElementById("descricao").value;
      const valorUnit = parseFloat(document.getElementById("valorUnit").value);
      const quantidade = parseInt(document.getElementById("quantidade").value);
      const entrada = parseFloat(document.getElementById("entrada").value || 0);

      const total = valorUnit * quantidade;
      const restante = total - entrada;

      // Configura o layout do PDF
      const doc = new jsPDF();

      // Adiciona o logo ao PDF (não estamos usando o logo no exemplo)
      // doc.addImage(logoBase64, "PNG", 15, 10, 40, 40);

      // Cabeçalho e conteúdo do PDF
      doc.setFontSize(16);
      doc.setTextColor(0, 0, 128);
      doc.text("BDS Refrigeração", 105, 20, { align: "center" });
      doc.setFontSize(12);
      doc.text("Fone: (87) 99654-1234", 105, 28, { align: "center" });

      // Informações do cliente e produtos/serviços
      doc.setFontSize(12);
      doc.text(`Tipo: ${tipo}`, 15, 60);
      doc.text(`Data: ${data}`, 15, 70);
      doc.text(`Cliente: ${nome}`, 15, 80);
      doc.text(`Endereço: ${endereco}`, 15, 90);
      doc.text(`Cidade: ${cidade}`, 15, 100);
      doc.text(`CPF/CNPJ: ${cpf}`, 15, 110);

      // Tabela de produtos/serviços
      doc.text(descricao, 15, 130);
      doc.text(`${quantidade}`, 120, 130);
      doc.text(`R$ ${valorUnit.toFixed(2)}`, 140, 130);
      doc.text(`R$ ${total.toFixed(2)}`, 180, 130);

      // Totais
      doc.text(`Entrada: R$ ${entrada.toFixed(2)}`, 15, 150);
      doc.text(`Restante: R$ ${restante.toFixed(2)}`, 15, 160);
      doc.setFontSize(14);
      doc.text(`TOTAL: R$ ${total.toFixed(2)}`, 15, 170);

      // Rodapé
      doc.text("Obrigado pela preferência!", 105, 280, { align: "center" });

      // Salva o PDF em formato base64
      pdfData = doc.output("datauristring");
      doc.save(`Nota_Fiscal_${nome}_${data}.pdf`);
    }


  </script>
</body>
</html>
